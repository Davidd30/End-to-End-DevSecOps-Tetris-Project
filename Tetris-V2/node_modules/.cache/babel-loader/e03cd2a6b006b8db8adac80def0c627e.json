{"ast":null,"code":"import _slicedToArray from\"/Users/davidnabilgerges/Downloads/End-to-End-DevSecOps-Tetris-Project/End-to-End-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import _objectWithoutProperties from\"/Users/davidnabilgerges/Downloads/End-to-End-DevSecOps-Tetris-Project/End-to-End-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties\";import _taggedTemplateLiteral from\"/Users/davidnabilgerges/Downloads/End-to-End-DevSecOps-Tetris-Project/End-to-End-DevSecOps-Tetris-Project/Tetris-V2/node_modules/@babel/runtime/helpers/esm/taggedTemplateLiteral\";function _templateObject9(){var data=_taggedTemplateLiteral([\"\\n\\twidth: \",\"px;\\n\\t\",\"\\n\\t\",\"\\n\\tmargin-left: \",\"px;\\n\\tmargin-top: \",\"px;\\n\\tdisplay: flex;\\n\\tflex-direction: \",\";\\n\\talign-items: center;\\n\\tjustify-content: \",\";\\n\\tfont-size: \",\"px;\\n\"]);_templateObject9=function _templateObject9(){return data;};return data;}function _templateObject8(){var data=_taggedTemplateLiteral([\"\\n\\t\",\";\\n\"]);_templateObject8=function _templateObject8(){return data;};return data;}function _templateObject7(){var data=_taggedTemplateLiteral([\"\\n\\twidth: \",\"px;\\n\\theight: \",\"px;\\n\\tbackground-color: \",\";\\n\\tposition: relative;\\n\\tz-index: \",\";\\n\\n\\t\",\";\\n\\n\\t\",\";\\n\\n\\t\",\";\\n\\n\\t\",\";\\n\"]);_templateObject7=function _templateObject7(){return data;};return data;}function _templateObject6(){var data=_taggedTemplateLiteral([\"\\n\\tdisplay: flex;\\n\\tflex-direction: row;\\n\\tjustify-content: center;\\n\\theight: \",\"px;\\n\"]);_templateObject6=function _templateObject6(){return data;};return data;}function _templateObject5(){var data=_taggedTemplateLiteral([\"\\n\\twidth: 100%;\\n\\theight: 100%;\\n\\tdisplay: flex;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"]);_templateObject5=function _templateObject5(){return data;};return data;}function _templateObject4(){var data=_taggedTemplateLiteral([\"\\n\\tborder: \",\"px solid white;\\n\\tbackground-color: \",\";\\n\\ttransition: background-color 0.5s;\\n\\toverflow: hidden;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\"]);_templateObject4=function _templateObject4(){return data;};return data;}function _templateObject3(){var data=_taggedTemplateLiteral([\"\\n\\twidth: \",\"px;\\n\\theight: \",\"px;\\n\\tbackground-color: \",\";\\n\\ttransition: background-color 0.5;\\n\\tborder: \",\"px solid white;\\n\\toverflow: hidden;\\n\\tdisplay: flex;\\n\\tflex-direction: column;\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tmargin-bottom: \",\"px;\\n\\tmargin-right: \",\"px;\\n\"]);_templateObject3=function _templateObject3(){return data;};return data;}function _templateObject2(){var data=_taggedTemplateLiteral([\"\\n\\t\",\"\\n\\t\",\"\\n\\tmargin-right: \",\"px;\\n\\tmargin-bottom: \",\"px;\\n\\tdisplay: flex;\\n\\tflex-direction: \",\";\\n\\tjustify-content: \",\";\\n\\talign-items: center;\\n\"]);_templateObject2=function _templateObject2(){return data;};return data;}function _templateObject(){var data=_taggedTemplateLiteral([\"\\n\\twidth: 100vw;\\n\\theight: \",\"vh;\\n\\tdisplay: flex;\\n\\tflex-direction: \",\";\\n\\tjustify-content: center;\\n\\talign-items: center;\\n\\tbackground-image: url(\",\");\\n\\tbackground-size: cover;\\n\\tbackground-position: center;\\n\"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useState,useEffect,useRef}from\"react\";import styled from\"styled-components\";import Switch from\"react-switch\";import useWindowDimensions from\"../../hooks/useWindowDimensions\";import background from\"../../images/background.jpg\";import StatusRow from\"../StatusRow\";import LoseGame from'../LoseGame';import Color from\"color\";var Game=styled.div(_templateObject(),function(props){return props.portrait?\"95\":\"100\";},function(props){return props.portrait?\"column\":\"row\";},background);var ContainerNext=styled.div(_templateObject2(),function(props){return!props.portrait&&\"height: \".concat(props.pixelSize*18+18/3*1,\"px;\");},function(props){return props.portrait&&\"width: \".concat(props.pixelSize*10+10/3*1,\"px;\");},function(props){return props.portrait?0:props.pixelSize/3;},function(props){return props.portrait?props.pixelSize/3:0;},function(props){return props.portrait?\"row\":\"column\";},function(props){return props.portrait?\"space-between\":\"flex-start\";});var Next=styled.div(_templateObject3(),function(props){return props.pixelSize*3;},function(props){return props.pixelSize*3;},function(props){return props.theme3d?\"#444\":\"black\";},function(props){return props.pixelSize/10;},function(props){return props.portrait?0:props.pixelSize/3;},function(props){return!props.portrait?0:props.pixelSize/3;});var StyledStage=styled.div(_templateObject4(),function(props){return props.pixelSize/10;},function(props){return props.theme3d?\"#444\":\"black\";});var Center=styled.div(_templateObject5());var Row=styled.div(_templateObject6(),function(props){return props.stage?props.pixelSize:props.pixelSize/1.6;});var Pixel=React.memo(styled.div(_templateObject7(),function(props){return props.stage?props.pixelSize:props.pixelSize/1.6;},function(props){return props.stage?props.pixelSize:props.pixelSize/1.6;},function(props){return props.fill===1?props.color:\"inherited\";},function(props){return props.zIndex;},function(props){return props.paused&&\"\\n\\t\\ttransition: all 1s;\\n\\t\";},function(props){return props.fill&&props.theme3d&&\";\\n\\t\\tbox-shadow: \".concat(props.pixelSize/4.16,\"px \").concat(props.pixelSize/4.16,\"px \").concat(props.pixelSize/5.55,\"px #222\").concat(props.topBloco?\", 0 \".concat(-props.pixelSize/4.16,\"px 0 \").concat(Color(props.color).lighten(0.2)):\"\",\" \\n\\t\");},function(props){return!props.theme3d&&\"\\n\\t\\tborder-left: 1px solid \".concat(props.stage||props.fill||props.hint?\"#222\":\"black\",\";\\n\\t\\tborder-top: 1px solid \").concat(props.stage||props.fill||props.hint?\"#222\":\"black\",\";\\t\\n\\t\");},function(props){return props.hint&&\"\\n\\t\\tborder: 1px solid \".concat(Color(props.playerColor).alpha(0.5),\";\\n\\t\\tbackground-color: rgba(255,255,255,0.1);\\n\\t\");}));var ContainerSwitch=styled.div(_templateObject8(),function(props){return props.portrait&&\"\\n\\t\\theight: 100%;\\n\\t\\twidth: 100%;\\n\\t\\tdisplay: flex;\\n\\t\\talign-items: flex-end;\\n\\t\\tflex-direction: column;\\n\\t\\tjustify-content: flex-end;\\n\\t\";});var ContainerStatus=styled.div(_templateObject9(),function(props){return props.pixelSize*8;},function(props){return!props.portrait&&\"height: \".concat(props.pixelSize*18+18/3*1,\"px;\");},function(props){return props.portrait&&\"width: \".concat(props.pixelSize*10+10/3*1,\"px;\");},function(props){return props.portrait?0:props.pixelSize/3;},function(props){return props.portrait?props.pixelSize/3:0;},function(props){return props.portrait?\"row\":\"column\";},function(props){return props.portrait?\"space-between\":\"flex-start\";},function(props){return props.pixelSize;});var getRenderizacaoBloco=function getRenderizacaoBloco(bloco){var trimRowBloco=[];var sumColumn={};bloco.forEach(function(row,y){var rowSum=0;row.forEach(function(pixel){return rowSum=rowSum+pixel;});if(rowSum>0)trimRowBloco.push(row);row.forEach(function(pixel,x){sumColumn[x]=(sumColumn[x]?sumColumn[x]:0)+pixel;});});var trimBloco=[];trimRowBloco.forEach(function(row,y){var newRow=[];row.forEach(function(pixel,x){if(sumColumn[x]>0)newRow.push(pixel);});trimBloco.push(newRow);});return trimBloco;};var Stage=function Stage(_ref){var lose=_ref.lose,restartClick=_ref.restartClick,map=_ref.map,player=_ref.player,hint=_ref.hint,status=_ref.status,paused=_ref.paused,others=_objectWithoutProperties(_ref,[\"lose\",\"restartClick\",\"map\",\"player\",\"hint\",\"status\",\"paused\"]);var _useState=useState(30),_useState2=_slicedToArray(_useState,2),pixelSize=_useState2[0],setPixelSize=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),portrait=_useState4[0],setPortrait=_useState4[1];var _useWindowDimensions=useWindowDimensions(),width=_useWindowDimensions.width,height=_useWindowDimensions.height;var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),theme3d=_useState6[0],setTheme3d=_useState6[1];var _useState7=useState(),_useState8=_slicedToArray(_useState7,2),nextRender=_useState8[0],setNextRender=_useState8[1];var stageRef=useRef(null);useEffect(function(){var pixelSizeHeight=height/20;var pixelSizeWidth=width/32;if(portrait){pixelSizeHeight=height/26;pixelSizeWidth=width/12;}setPixelSize(pixelSizeWidth<pixelSizeHeight?pixelSizeWidth:pixelSizeHeight);setPortrait(height>width);},[width,height,portrait]);useEffect(function(){if(!player.next)return;setNextRender(getRenderizacaoBloco(player.next.bloco));},[player.next]);useEffect(function(){if(!lose){stageRef.current.focus();}},[lose]);useEffect(function(){stageRef.current.focus();},[theme3d]);return React.createElement(\"div\",null,React.createElement(Game,{portrait:portrait},nextRender&&React.createElement(ContainerNext,{portrait:portrait,pixelSize:pixelSize},React.createElement(Next,{portrait:portrait,theme3d:theme3d,pixelSize:pixelSize},nextRender.map(function(row,y){return React.createElement(Row,{pixelSize:pixelSize,key:\"row-\".concat(y)},row.map(function(pixel,x){var topBloco=pixel&&(!nextRender[y-1]||!nextRender[y-1][x]);return React.createElement(Pixel,{paused:paused,theme3d:theme3d,topBloco:topBloco,zIndex:y,pixelSize:pixelSize,key:\"pixel-\".concat(x),fill:pixel,color:player.next.color});}));})),React.createElement(ContainerSwitch,{portrait:portrait},React.createElement(Switch,{width:pixelSize*2,height:pixelSize/1.2,onChange:setTheme3d,checked:theme3d,offColor:\"#000\",onColor:\"#444\",uncheckedIcon:React.createElement(Center,null,React.createElement(Pixel,{theme3d:false,pixelSize:pixelSize/3,stage:\"true\",fill:1,color:\"#e54b4b\"})),checkedIcon:React.createElement(Center,null,React.createElement(Pixel,{theme3d:\"true\",pixelSize:pixelSize/3,stage:\"true\",fill:1,color:\"#e54b4b\",topBloco:\"true\"}))}))),map&&React.createElement(StyledStage,Object.assign({ref:stageRef},others,{theme3d:theme3d,pixelSize:pixelSize}),map.map(function(row,y){return React.createElement(Row,{stage:\"true\",pixelSize:pixelSize,key:\"row-\".concat(y)},row.map(function(pixel,x){var playerFill=player.bloco.bloco[y-player.pos[0]]&&player.bloco.bloco[y-player.pos[0]][x-player.pos[1]];var playerHint=hint.bloco.bloco[y-hint.pos[0]]&&hint.bloco.bloco[y-hint.pos[0]][x-hint.pos[1]];var topBloco=(playerFill||pixel.fill)&&(!player.bloco.bloco[y-player.pos[0]-1]||!player.bloco.bloco[y-player.pos[0]-1][x-player.pos[1]])&&(!map[y-1]||!map[y-1][x].fill);var zIndex=!playerFill&&!pixel.fill&&playerHint?99:y;return React.createElement(Pixel,{paused:paused,theme3d:theme3d,hint:!pixel.fill&&!playerFill&&playerHint,pixelSize:pixelSize,stage:\"true\",key:\"pixel-\".concat(x),fill:pixel.fill||playerFill,color:playerFill?player.bloco.color:pixel.color,playerColor:player.bloco.color,topBloco:topBloco,zIndex:zIndex});}));})),status&&React.createElement(ContainerStatus,{portrait:portrait,pixelSize:pixelSize},React.createElement(StatusRow,{backgroundColor:theme3d?\"#444\":\"black\",portrait:portrait,borderSize:pixelSize/10,margin:pixelSize/3,padding:pixelSize/2,title:\"SCORE\",value:status.score}),React.createElement(StatusRow,{backgroundColor:theme3d?\"#444\":\"black\",portrait:portrait,borderSize:pixelSize/10,margin:pixelSize/3,padding:pixelSize/2,title:\"LEVEL\",value:status.level}),React.createElement(StatusRow,{backgroundColor:theme3d?\"#444\":\"black\",portrait:portrait,borderSize:pixelSize/10,margin:pixelSize/3,padding:pixelSize/2,title:\"LINES\",value:status.lines}))),lose&&React.createElement(LoseGame,{portrait:portrait,restartClick:restartClick,status:status,pixelSize:pixelSize,theme3d:theme3d}));};export default Stage;","map":{"version":3,"sources":["/Users/davidnabilgerges/Downloads/End-to-End-DevSecOps-Tetris-Project/End-to-End-DevSecOps-Tetris-Project/Tetris-V2/src/components/Stage/index.js"],"names":["React","useState","useEffect","useRef","styled","Switch","useWindowDimensions","background","StatusRow","LoseGame","Color","Game","div","props","portrait","ContainerNext","pixelSize","Next","theme3d","StyledStage","Center","Row","stage","Pixel","memo","fill","color","zIndex","paused","topBloco","lighten","hint","playerColor","alpha","ContainerSwitch","ContainerStatus","getRenderizacaoBloco","bloco","trimRowBloco","sumColumn","forEach","row","y","rowSum","pixel","push","x","trimBloco","newRow","Stage","lose","restartClick","map","player","status","others","setPixelSize","setPortrait","width","height","setTheme3d","nextRender","setNextRender","stageRef","pixelSizeHeight","pixelSizeWidth","next","current","focus","playerFill","pos","playerHint","score","level","lines"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport styled from \"styled-components\";\nimport Switch from \"react-switch\";\n\nimport useWindowDimensions from \"../../hooks/useWindowDimensions\";\nimport background from \"../../images/background.jpg\";\nimport StatusRow from \"../StatusRow\";\nimport LoseGame from '../LoseGame';\n\nimport Color from \"color\";\n\nconst Game = styled.div`\n\twidth: 100vw;\n\theight: ${props => (props.portrait ? \"95\" : \"100\")}vh;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"column\" : \"row\")};\n\tjustify-content: center;\n\talign-items: center;\n\tbackground-image: url(${background});\n\tbackground-size: cover;\n\tbackground-position: center;\n`;\n\nconst ContainerNext = styled.div`\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-right: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-bottom: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\talign-items: center;\n`;\n\nconst Next = styled.div`\n\twidth: ${props => props.pixelSize * 3}px;\n\theight: ${props => props.pixelSize * 3}px;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5;\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n\tmargin-bottom: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-right: ${props => (!props.portrait ? 0 : props.pixelSize / 3)}px;\n`;\n\nconst StyledStage = styled.div`\n\tborder: ${props => props.pixelSize / 10}px solid white;\n\tbackground-color: ${props => (props.theme3d ? \"#444\" : \"black\")};\n\ttransition: background-color 0.5s;\n\toverflow: hidden;\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Center = styled.div`\n\twidth: 100%;\n\theight: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n`;\n\nconst Row = styled.div`\n\tdisplay: flex;\n\tflex-direction: row;\n\tjustify-content: center;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n`;\n\nconst Pixel = React.memo(styled.div`\n\twidth: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\theight: ${props => (props.stage ? props.pixelSize : props.pixelSize / 1.6)}px;\n\tbackground-color: ${props => (props.fill === 1 ? props.color : \"inherited\")};\n\tposition: relative;\n\tz-index: ${props => props.zIndex};\n\n\t${props =>\n\t\tprops.paused &&\n\t\t`\n\t\ttransition: all 1s;\n\t`};\n\n\t${props =>\n\t\tprops.fill &&\n\t\tprops.theme3d &&\n\t\t`;\n\t\tbox-shadow: ${props.pixelSize / 4.16}px ${props.pixelSize /\n\t\t\t4.16}px ${props.pixelSize / 5.55}px #222${\n\t\t\tprops.topBloco\n\t\t\t\t? `, 0 ${-props.pixelSize / 4.16}px 0 ${Color(props.color).lighten(0.2)}`\n\t\t\t\t: \"\"\n\t\t} \n\t`};\n\n\t${props =>\n\t\t!props.theme3d &&\n\t\t`\n\t\tborder-left: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\n\t\tborder-top: 1px solid ${\n\t\t\tprops.stage || props.fill || props.hint ? \"#222\" : \"black\"\n\t\t};\t\n\t`};\n\n\t${props =>\n\t\tprops.hint &&\n\t\t`\n\t\tborder: 1px solid ${Color(props.playerColor).alpha(0.5)};\n\t\tbackground-color: rgba(255,255,255,0.1);\n\t`};\n`);\n\nconst ContainerSwitch = styled.div`\n\t${props =>\n\t\tprops.portrait &&\n\t\t`\n\t\theight: 100%;\n\t\twidth: 100%;\n\t\tdisplay: flex;\n\t\talign-items: flex-end;\n\t\tflex-direction: column;\n\t\tjustify-content: flex-end;\n\t`};\n`;\n\nconst ContainerStatus = styled.div`\n\twidth: ${props => props.pixelSize * 8}px;\n\t${props =>\n\t\t!props.portrait && `height: ${props.pixelSize * 18 + (18 / 3) * 1}px;`}\n\t${props => props.portrait && `width: ${props.pixelSize * 10 + (10 / 3) * 1}px;`}\n\tmargin-left: ${props => (props.portrait ? 0 : props.pixelSize / 3)}px;\n\tmargin-top: ${props => (props.portrait ? props.pixelSize / 3 : 0)}px;\n\tdisplay: flex;\n\tflex-direction: ${props => (props.portrait ? \"row\" : \"column\")};\n\talign-items: center;\n\tjustify-content: ${props => (props.portrait ? \"space-between\" : \"flex-start\")};\n\tfont-size: ${props => props.pixelSize}px;\n`;\n\nconst getRenderizacaoBloco = bloco => {\n\tlet trimRowBloco = [];\n\tlet sumColumn = {};\n\tbloco.forEach((row, y) => {\n\t\tlet rowSum = 0;\n\t\trow.forEach(pixel => (rowSum = rowSum + pixel));\n\t\tif (rowSum > 0) trimRowBloco.push(row);\n\t\trow.forEach((pixel, x) => {\n\t\t\tsumColumn[x] = (sumColumn[x] ? sumColumn[x] : 0) + pixel;\n\t\t});\n\t});\n\tlet trimBloco = [];\n\ttrimRowBloco.forEach((row, y) => {\n\t\tlet newRow = [];\n\t\trow.forEach((pixel, x) => {\n\t\t\tif (sumColumn[x] > 0) newRow.push(pixel);\n\t\t});\n\t\ttrimBloco.push(newRow);\n\t});\n\treturn trimBloco;\n};\n\nconst Stage = ({ lose, restartClick, map, player, hint, status, paused, ...others }) => {\n\tconst [pixelSize, setPixelSize] = useState(30);\n\tconst [portrait, setPortrait] = useState(false);\n\tconst { width, height } = useWindowDimensions();\n\tconst [theme3d, setTheme3d] = useState(false);\n\tconst [nextRender, setNextRender] = useState();\n\tconst stageRef = useRef(null);\n\n\tuseEffect(() => {\n\t\tlet pixelSizeHeight = height / 20;\n\t\tlet pixelSizeWidth = width / 32;\n\t\tif (portrait) {\n\t\t\tpixelSizeHeight = height / 26;\n\t\t\tpixelSizeWidth = width / 12;\n\t\t}\n\t\tsetPixelSize(\n\t\t\tpixelSizeWidth < pixelSizeHeight ? pixelSizeWidth : pixelSizeHeight\n\t\t);\n\t\tsetPortrait(height > width);\n\t}, [width, height, portrait]);\n\n\tuseEffect(() => {\n\t\tif (!player.next) return;\n\t\tsetNextRender(getRenderizacaoBloco(player.next.bloco));\n\t}, [player.next]);\n\n\tuseEffect(() => {\n\t\tif (!lose) {\n\t\t\tstageRef.current.focus();\n\t\t}\n\t}, [lose]);\n\n\tuseEffect(() => {\n\t\tstageRef.current.focus();\n\t}, [theme3d]);\n\n\treturn (\n\t\t<div>\n\t\t\t<Game portrait={portrait}>\n\t\t\t\t{nextRender && (\n\t\t\t\t\t<ContainerNext portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<Next portrait={portrait} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t\t{nextRender.map((row, y) => (\n\t\t\t\t\t\t\t\t<Row pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\t\tlet topBloco = pixel && (!nextRender[y - 1] || !nextRender[y - 1][x]);\n\t\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\t\tzIndex={y}\n\t\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\t\tfill={pixel}\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={player.next.color}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Next>\n\t\t\t\t\t\t<ContainerSwitch portrait={portrait}>\n\t\t\t\t\t\t\t<Switch\n\t\t\t\t\t\t\t\twidth={pixelSize * 2}\n\t\t\t\t\t\t\t\theight={pixelSize / 1.2}\n\t\t\t\t\t\t\t\tonChange={setTheme3d}\n\t\t\t\t\t\t\t\tchecked={theme3d}\n\t\t\t\t\t\t\t\toffColor=\"#000\"\n\t\t\t\t\t\t\t\tonColor=\"#444\"\n\t\t\t\t\t\t\t\tuncheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={false}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tcheckedIcon={\n\t\t\t\t\t\t\t\t\t<Center>\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\ttheme3d=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize / 3}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tfill={1}\n\t\t\t\t\t\t\t\t\t\t\tcolor={\"#e54b4b\"}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco=\"true\"\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Center>\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t</ContainerSwitch>\n\t\t\t\t\t</ContainerNext>\n\t\t\t\t)}\n\t\t\t\t{map && (\n\t\t\t\t\t<StyledStage ref={stageRef} {...others} theme3d={theme3d} pixelSize={pixelSize}>\n\t\t\t\t\t\t{map.map((row, y) => (\n\t\t\t\t\t\t\t<Row stage=\"true\" pixelSize={pixelSize} key={`row-${y}`}>\n\t\t\t\t\t\t\t\t{row.map((pixel, x) => {\n\t\t\t\t\t\t\t\t\tlet playerFill =\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\tplayer.bloco.bloco[y - player.pos[0]][x - player.pos[1]];\n\t\t\t\t\t\t\t\t\tlet playerHint =\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]] &&\n\t\t\t\t\t\t\t\t\t\thint.bloco.bloco[y - hint.pos[0]][x - hint.pos[1]];\n\t\t\t\t\t\t\t\t\tlet topBloco =\n\t\t\t\t\t\t\t\t\t\t(playerFill || pixel.fill) &&\n\t\t\t\t\t\t\t\t\t\t(!player.bloco.bloco[y - player.pos[0] - 1] ||\n\t\t\t\t\t\t\t\t\t\t\t!player.bloco.bloco[y - player.pos[0] - 1][x - player.pos[1]]) &&\n\t\t\t\t\t\t\t\t\t\t(!map[y - 1] || !map[y - 1][x].fill);\n\t\t\t\t\t\t\t\t\tlet zIndex = !playerFill && !pixel.fill && playerHint ? 99 : y;\n\t\t\t\t\t\t\t\t\treturn (\n\t\t\t\t\t\t\t\t\t\t<Pixel\n\t\t\t\t\t\t\t\t\t\t\tpaused={paused}\n\t\t\t\t\t\t\t\t\t\t\ttheme3d={theme3d}\n\t\t\t\t\t\t\t\t\t\t\thint={!pixel.fill && !playerFill && playerHint}\n\t\t\t\t\t\t\t\t\t\t\tpixelSize={pixelSize}\n\t\t\t\t\t\t\t\t\t\t\tstage=\"true\"\n\t\t\t\t\t\t\t\t\t\t\tkey={`pixel-${x}`}\n\t\t\t\t\t\t\t\t\t\t\tfill={pixel.fill || playerFill}\n\t\t\t\t\t\t\t\t\t\t\tcolor={playerFill ? player.bloco.color : pixel.color}\n\t\t\t\t\t\t\t\t\t\t\tplayerColor={player.bloco.color}\n\t\t\t\t\t\t\t\t\t\t\ttopBloco={topBloco}\n\t\t\t\t\t\t\t\t\t\t\tzIndex={zIndex}\n\t\t\t\t\t\t\t\t\t\t></Pixel>\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t})}\n\t\t\t\t\t\t\t</Row>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</StyledStage>\n\t\t\t\t)}\n\t\t\t\t{status && (\n\t\t\t\t\t<ContainerStatus portrait={portrait} pixelSize={pixelSize}>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"SCORE\"\n\t\t\t\t\t\t\tvalue={status.score}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LEVEL\"\n\t\t\t\t\t\t\tvalue={status.level}\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<StatusRow\n\t\t\t\t\t\t\tbackgroundColor={theme3d ? \"#444\" : \"black\"}\n\t\t\t\t\t\t\tportrait={portrait}\n\t\t\t\t\t\t\tborderSize={pixelSize / 10}\n\t\t\t\t\t\t\tmargin={pixelSize / 3}\n\t\t\t\t\t\t\tpadding={pixelSize / 2}\n\t\t\t\t\t\t\ttitle=\"LINES\"\n\t\t\t\t\t\t\tvalue={status.lines}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</ContainerStatus>\n\t\t\t\t)}\n\t\t\t</Game>\n\t\t\t{ lose && \n\t\t\t\t<LoseGame portrait={portrait} restartClick={restartClick} status={status} pixelSize={pixelSize} theme3d={theme3d}>\n\t\t\t\t</LoseGame>}\n\t\t</div>\n\t);\n};\n\nexport default Stage;\n"]},"metadata":{},"sourceType":"module"}